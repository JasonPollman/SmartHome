<div data-theme="b" class="motion-widget-wrapper">
    <input id="hidden-motion" class="widget" type="hidden" name="" value="0" />
    <img id="motion-indicator" src="img/runner.png" class="motion-indicator"></div>
    <script>
        $(function () {
            $("#hidden-motion").change(function () {
                console.log("CHANGING");
                $("#motion-indicator").attr("src",
                        ($(this).val() == "0") ? "img/runner.png" : "img/runner-motion.png"
                );
            });

            var ele = $("#hidden-motion");
            var enabled = $("#enable-widget-motion-0");
            var indicator = $("#motion-indicator");
            var thisPage = $.mobile.activePage.attr("id");

            // Hide the motion indicator on the schedules page, since we can't schedule a "motion" event.
            if (thisPage == "schedule") {
                indicator.hide().after('<div class="message info"><i class="fa fa-lightbulb-o"></i><p>This device has no schedulable settings.</p></div>');
            }

            if (thisPage == "rule") {

                function showhideMotion() {

                    if (enabled.val() == "1") {
                        indicator.removeClass("ui-state-disabled");
                        indicator.click(function () {
                            var val = $(ele).val();
                            (val == "1") ? $(ele).val("0") : $(ele).val("1");
                            $(ele).trigger("change");
                        });
                    }
                    else {
                        indicator.off();
                        indicator.addClass("ui-state-disabled");
                    }

                } // End showhideMotion()

                enabled.change(showhideMotion());
                showhideMotion();

            } // End if (thisPage == "rule")

        }); // End document ready
    </script>
</div>